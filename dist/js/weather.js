var weather=angular.module("ssweather",[]);weather.controller("weatherController",["$scope","$http",function(e,t){e.tips=[],e.city="上海",e.temperature="12",e.humidity=35,e.setHumidity=function(e){var t=document.querySelector(".rightRotate"),r=document.querySelector(".leftRotate");50>e?(console.log("h:"+e),t.style.transform="rotate("+(3.6*e+45)+"deg)"):(console.log("h:"+e),t.style.transform="rotate(225deg)",r.style.transform="rotate("+(3.6*(e-50)+45)+"deg)")},e.getWeatherNow=function(r){var o="https://api.thinkpage.cn/v2/weather/now.json?language=zh-chs&unit=c&key=STUQDFMKSP&city=";o+=r,e.city=r,t({method:"GET",url:o}).then(function(t){var r=t.data.weather;console.log(r[0].now.temperature),e.temperature=r[0].now.temperature,e.humidity=r[0].now.humidity,e.setHumidity(e.humidity)},function(e){console.log("get weather now error:"+e)})},e.hideAsk=function(){var e=document.querySelector(".contact-bar"),t=document.querySelector(".askLocation"),r=document.querySelector(".for-location"),o=document.querySelector(".where");e.style.display="",t.style.display="none",r.innerHTML="",o.value=""},function(){var t=document.querySelector(".where"),r=document.querySelector(".for-location"),o=0;EventUtil.addHandler(t,"input",function(){var n=new RegExp("^"+t.value+".*$","im");e.tips=[],o=0;for(var a=0;a<citys.length&&!(o>2);a++)n.test(citys[a][0])&&(e.tips.push(citys[a][0]),o++);r.innerHTML="";for(var a=0;a<e.tips.length;a++){var i=document.createElement("li");i.innerHTML=e.tips[a],EventUtil.addHandler(i,"click",function(t){e.getWeatherNow(t.target.innerHTML),e.hideAsk()}),r.appendChild(i)}})}()}]);